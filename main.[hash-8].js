(()=>{"use strict";async function t(t){const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?units=metric&q=${t}&appid=c768bc4e962d2a69c28ba404045dc96c`),n=await e.json();return console.log(n),n}async function e(){const t=await fetch("https://get.geojs.io/v1/ip/geo.json");console.log(t);const e=await t.json(JSON.stringify());return console.log(e),e.city}!async function(n){const o=document.createElement("p");o.classList.add("local");const a=await e();o.innerText=`Город :  ${a}`,n.append(o);const c=document.createElement("p");c.classList.add("local");const s=await t(a);c.innerText=`Температура :  ${Math.round(s.main.temp)} °C`,n.append(c);const l=document.createElement("img");l.classList.add("local");const r=s.weather[0].icon;l.src=`http://openweathermap.org/img/wn/${r}@2x.png`,n.append(l)}(document.querySelector("#header-container")),async function(n){const o=document.createElement("form");n.prepend(o);const a=document.createElement("h2");a.textContent="Хочешь узнать погоду?",n.prepend(a);const c=document.createElement("input");c.placeholder="Введи название города",o.append(c);const s=document.createElement("button");s.innerText="Жми сюда",o.append(s);const l=document.createElement("div");l.classList.add("city-name"),l.textContent="Город : ",n.append(l);const r=document.createElement("p");r.classList.add("city-place"),l.append(r);const d=document.createElement("p");d.classList.add("city-temp"),d.textContent="Температура : ",n.append(d);const p=document.createElement("img");p.alt="здесь будет картинка",n.append(p);const m=document.createElement("h2");n.append(m);const i=document.createElement("div");i.id="weather-box",n.append(i);const u=document.createElement("h2");n.append(u);const h=document.createElement("div");h.id="map-container",n.append(h);const g=await e(),x=await t(g);console.log(x);const w=`https://static-maps.yandex.ru/1.x/?ll=${x.coord.lon},${x.coord.lat}&size=450,450&z=12&l=map`,y=document.createElement("img");y.classList.add("map"),y.src=w,console.log(y),h.append(y),o.addEventListener("submit",(async e=>{e.preventDefault();let n=c.value;!function(t){const e=`city${localStorage.length}`;localStorage.setItem(e,t)}(n);let o=await t(n),a=o.weather[0].icon;p.src=`http://openweathermap.org/img/wn/${a}@2x.png`;const s=document.createElement("p");s.textContent=o.name,l.textContent=`Город :  ${s.textContent}`,d.textContent=`Температура :  ${Math.round(o.main.temp)} °C`;const r=document.createElement("button");r.classList.add("list");let{lon:g}=o.coord,{lat:x}=o.coord;m.textContent="Вы недавно смотрели погоду в городах",u.textContent="Это то, что Вы ищете?";const w=document.createElement("img");w.classList.add("map"),w.src=`https://static-maps.yandex.ru/1.x/?ll=${g},${x}&size=450,450&z=12&l=map`;let y=document.querySelectorAll(".map");if(1===y.length?(y[0].remove(),h.append(w)):h.append(w),s.textContent){r.textContent=s.textContent;const e=i.querySelectorAll(".list"),m=Array.from(e,(t=>t.innerText));m.includes(r.innerHTML)&&r.innerHTML!==m[9]?console.log(m):i.prepend(r),e.length>9&&e[9].remove(),c.value="",r.addEventListener("click",(async()=>{n=r.textContent,o=await t(n),l.textContent=`Город :  ${s.textContent}`,d.textContent=`Температура :  ${Math.round(o.main.temp)} °C`,a=o.weather[0].icon,p.src=`http://openweathermap.org/img/wn/${a}@2x.png`,g=o.coord.lon,x=o.coord.lat,w.src=`https://static-maps.yandex.ru/1.x/?ll=${g},${x}&size=450,450&z=12&l=map`,y=document.querySelectorAll(".map"),1===y.length?(y[0].remove(),h.append(w)):h.append(w)}))}}))}(document.querySelector("#container"))})();