(()=>{"use strict";async function e(e){const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?units=metric&q=${e}&appid=c768bc4e962d2a69c28ba404045dc96c`);return await t.json()}!async function(t){const n=document.createElement("p");n.classList.add("local");const a=await async function(){const e=await fetch("https://get.geojs.io/v1/ip/geo.json");console.log(e);const t=await e.json(JSON.stringify());return console.log(t),t.city}();n.innerText=`Город :  ${a}`,t.append(n);const c=document.createElement("p");c.classList.add("local");const o=await e(a);c.innerText=`Температура :  ${Math.round(o.main.temp)} °C`,t.append(c);const s=document.createElement("img");s.classList.add("local");const r=o.weather[0].icon;s.src=`http://openweathermap.org/img/wn/${r}@2x.png`,t.append(s)}(document.querySelector("#header-container")),async function(t){const n=document.createElement("form");t.prepend(n);const a=document.createElement("h2");a.textContent="Хочешь узнать погоду?",t.prepend(a);const c=document.createElement("input");c.placeholder="Введи название города",n.append(c);const o=document.createElement("button");o.innerText="Жми сюда",n.append(o);const s=document.createElement("div");s.classList.add("city-name"),s.textContent="Город : ",t.append(s);const r=document.createElement("p");r.classList.add("city-place"),s.append(r);const d=document.createElement("p");d.classList.add("city-temp"),d.textContent="Температура : ",t.append(d);const p=document.createElement("img");p.alt="здесь будет картинка",t.append(p);const l=document.createElement("h2");l.textContent="Вы недавно смотрели погоду в городах",t.append(l);const m=document.createElement("div");m.id="weather-box",t.append(m);const i=document.createElement("h2");i.textContent="Это то, что Вы ищете?",t.append(i);const u=document.createElement("div");u.id="map-container",t.append(u),n.addEventListener("submit",(async t=>{t.preventDefault();let n=c.value,a=await e(n),o=a.weather[0].icon;p.src=`http://openweathermap.org/img/wn/${o}@2x.png`;const r=document.createElement("p");r.textContent=a.name,s.textContent=`Город :  ${r.textContent}`,d.textContent=`Температура :  ${Math.round(a.main.temp)} °C`;const l=document.createElement("button");l.classList.add("list");let{lon:i}=a.coord,{lat:h}=a.coord;const x=document.createElement("img");x.classList.add("map"),x.src=`https://static-maps.yandex.ru/1.x/?ll=${i},${h}&size=450,450&z=12&l=map`;let g=document.querySelectorAll(".map");if(1===g.length?(g[0].remove(),u.append(x)):u.append(x),r.textContent){l.textContent=r.textContent;const t=m.querySelectorAll(".list"),w=Array.from(t,(e=>e.innerText));w.includes(l.innerHTML)&&l.innerHTML!==w[9]?console.log(w):m.prepend(l),t.length>9&&t[9].remove(),c.value="",l.addEventListener("click",(async()=>{n=l.textContent,a=await e(n),s.textContent=`Город :  ${r.textContent}`,d.textContent=`Температура :  ${Math.round(a.main.temp)} °C`,o=a.weather[0].icon,p.src=`http://openweathermap.org/img/wn/${o}@2x.png`,i=a.coord.lon,h=a.coord.lat,x.src=`https://static-maps.yandex.ru/1.x/?ll=${i},${h}&size=450,450&z=12&l=map`,g=document.querySelectorAll(".map"),1===g.length?(g[0].remove(),u.append(x)):u.append(x)}))}}))}(document.querySelector("#container"))})();