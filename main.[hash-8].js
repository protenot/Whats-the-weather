(()=>{"use strict";async function t(t){const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?units=metric&q=${t}&appid=c768bc4e962d2a69c28ba404045dc96c`),n=await e.json();return console.log(n),n}!async function(e){const n=document.createElement("p");n.classList.add("local");const c=await async function(){const t=await fetch("https://get.geojs.io/v1/ip/geo.json");console.log(t);const e=await t.json(JSON.stringify());return console.log(e),e.city}();n.innerText=`Город :  ${c}`,e.append(n);const o=document.createElement("p");o.classList.add("local");const a=await t(c);o.innerText=`Температура :  ${Math.round(a.main.temp)} °C`,e.append(o);const s=document.createElement("img");s.classList.add("local");const r=a.weather[0].icon;s.src=`http://openweathermap.org/img/wn/${r}@2x.png`,e.append(s)}(document.querySelector("#header-container")),async function(e){const n=document.createElement("form");e.prepend(n);const c=document.createElement("h2");c.textContent="Хочешь узнать погоду?",e.prepend(c);const o=document.createElement("input");o.placeholder="Введи название города",n.append(o);const a=document.createElement("button");a.innerText="Жми сюда",n.append(a);const s=document.createElement("div");s.classList.add("city-name"),s.textContent="Город : ",e.append(s);const r=document.createElement("p");r.classList.add("city-place"),s.append(r);const l=document.createElement("p");l.classList.add("city-temp"),l.textContent="Температура : ",e.append(l);const d=document.createElement("img");d.alt="здесь будет картинка",e.append(d);const p=document.createElement("h2");e.append(p);const m=document.createElement("div");m.id="weather-box",e.append(m);const i=document.createElement("h2");e.append(i);const u=document.createElement("div");u.id="map-container",e.append(u),n.addEventListener("submit",(async e=>{e.preventDefault();let n=o.value;!function(t){const e=`city${localStorage.length}`;localStorage.setItem(e,t)}(n);let c=await t(n),a=c.weather[0].icon;d.src=`http://openweathermap.org/img/wn/${a}@2x.png`;const r=document.createElement("p");r.textContent=c.name,s.textContent=`Город :  ${r.textContent}`,l.textContent=`Температура :  ${Math.round(c.main.temp)} °C`;const h=document.createElement("button");h.classList.add("list");let{lon:x}=c.coord,{lat:g}=c.coord;p.textContent="Вы недавно смотрели погоду в городах",i.textContent="Это то, что Вы ищете?";const w=document.createElement("img");w.classList.add("map"),w.src=`https://static-maps.yandex.ru/1.x/?ll=${x},${g}&size=450,450&z=12&l=map`;let y=document.querySelectorAll(".map");if(1===y.length?(y[0].remove(),u.append(w)):u.append(w),r.textContent){h.textContent=r.textContent;const e=m.querySelectorAll(".list"),p=Array.from(e,(t=>t.innerText));p.includes(h.innerHTML)&&h.innerHTML!==p[9]?console.log(p):m.prepend(h),e.length>9&&e[9].remove(),o.value="",h.addEventListener("click",(async()=>{n=h.textContent,c=await t(n),s.textContent=`Город :  ${r.textContent}`,l.textContent=`Температура :  ${Math.round(c.main.temp)} °C`,a=c.weather[0].icon,d.src=`http://openweathermap.org/img/wn/${a}@2x.png`,x=c.coord.lon,g=c.coord.lat,w.src=`https://static-maps.yandex.ru/1.x/?ll=${x},${g}&size=450,450&z=12&l=map`,y=document.querySelectorAll(".map"),1===y.length?(y[0].remove(),u.append(w)):u.append(w)}))}}))}(document.querySelector("#container"))})();